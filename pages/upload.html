<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js" integrity="sha512-rpLlll167T5LJHwp0waJCh3ZRf7pO6IT1+LZOhAyP6phAirwchClbTZV3iqL3BMrVxIYRbzGTpli4rfxsCK6Vw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="../public/code/styles/index.css"/>
    <link rel="stylesheet" href="../public/code/styles/upload.css"/>
    <link rel="stylesheet" href="/code/styles/download.css"/>
    <link rel="stylesheet" href="/code/styles/upload.css"/>
    <title>Document</title>
</head>

<body>
    <div class="mtio">
        <header>
            <nav class="nav">
            <input type="checkbox" id="check" />
            <label for="check" class="checkbtn">
                <i class="fas fa-bars"></i>
            </label>
            <label class="logo"> D.Star Server </label>
            <ul>
                <li><a href="#" class="active"> Home </a></li>
                <li><a href="/"> Upload </a></li>
                <li><a href="/pool"> Download </a></li>
                <li><a href="/getclipboard"> Copy </a></li>
                <li><a href="/pastclipboard"> Paste </a></li>
                <li><a target="_blank" href="https://github.com/Ddhruv-IOT/Smart-Share"> About </a></li>
            </ul>
            </nav>
        </header>

        <!-- <form>
            <input type="file" name="f" id="fileInput"  multiple>
            <button type="button" id="uploadButton"> Upload </button>
        </form> -->

        <div class="cover">
            <div class="rmain">
                <div class="rholder">
                    <div class="rimg">
                        <img src="http://server.node/code/assets/dw.png"/>
                    </div>

                    <form>
                        <label for="fileInput" class="label">
                            <input type="file" name="f" id="fileInput"  multiple>
                                <div class="rtxt">
                                <p> Drag your files here<br/> OR</p>
                            </div>
                            <div class="rbtn-browse"> <p> Browse </p> </div>
                        </label>
                        <div class="rbtn-submit"> Submit </div>
                    </form>
                </div>
                <div class="rloder"></div>
            </div>
        </div>
    </div>

    <script>
        window.onload = ()=> {
            
            var fileInput = document.querySelector('#fileInput');
            var uploadButton = document.querySelector('#uploadButton');

            uploadButton.addEventListener('click', function() {
                var formData = new FormData();
                var files = fileInput.files;
                
                for (var i = 0; i < files.length; i++) {
                    formData.append("f", files[i]);
                }

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/upload', true);

                xhr.upload.onprogress = function(event) {
                    // Handle progress events
                    console.log((event.loaded /event.total)*100)
                };

                xhr.onload = function() {
                    // Handle success or failure
                    console.log(event.returnValue)
                    document.getElementById("fileInput").value = "";
                };

                xhr.send(formData);
            });
        }
    </script>

<div class="form-group file-area">
    <!-- <label for="images"></span></label> -->
<input type="file" name="images" id="images" required="required" multiple="multiple"/>
<div class="file-dummy">
  <div class="success">Great, your files are selected. Keep on.</div>
  <div class="default">Please select some files</div>
</div>
</div>


</body>
<!-- <link rel="stylesheet/less" type="text/css" href="styles.less" />
<script src="https://cdn.jsdelivr.net/npm/less" ></script> -->
</html>
