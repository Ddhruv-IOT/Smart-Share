<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js" integrity="sha512-rpLlll167T5LJHwp0waJCh3ZRf7pO6IT1+LZOhAyP6phAirwchClbTZV3iqL3BMrVxIYRbzGTpli4rfxsCK6Vw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="../public/code/index.css"/>
    <link rel="stylesheet" href="../public/code/upload.css"/>
    <link rel="stylesheet" href="/code/index.css"/>
    <link rel="stylesheet" href="/code/upload.css"/>
    <title>Document</title>
</head>

<body>
    <div class="mtio">
    <header>
        <nav class="nav">
          <input type="checkbox" id="check" />
          <label for="check" class="checkbtn">
            <i class="fas fa-bars"></i>
          </label>
          <label class="logo"> D.Star Server </label>
          <ul>
            <li><a href="#" class="active"> Home </a></li>
            <li><a href="/"> Upload </a></li>
            <li><a href="/pool"> Download </a></li>
            <li><a href="/getclipboard"> Copy </a></li>
            <li><a href="/pastclipboard"> Paste </a></li>
            <li><a target="_blank" href="https://github.com/Ddhruv-IOT/Smart-Share"> About </a></li>
          </ul>
        </nav>
    </header>

    <!-- <form>
        <input type="file" name="f" id="fileInput"  multiple>
        <button type="button" id="uploadButton"> Upload </button>
    </form> -->

    <div class="cover">
    <div class="rmain">
        <div class="rholder">
            <div class="rimg">
                <img src="http://server.node/dw.png"/>
            </div>
            <div class="rtxt">
                <p> Drag your files here<br/> OR</p>
                <!-- <p>  </p> -->
            </div>
            <div class="rbtn-browse"> <p> Browse </p> </div>
            <div class="rbtn-submit"> Submnit</div>
        </div>
        <div class="rloder"></div>
    </div>
</div>
    </div>

    <script>
        window.onload = ()=> {
            
            var fileInput = document.querySelector('#fileInput');
            var uploadButton = document.querySelector('#uploadButton');

            uploadButton.addEventListener('click', function() {
                var formData = new FormData();
                var files = fileInput.files;
                
                for (var i = 0; i < files.length; i++) {
                    formData.append("f", files[i]);
                }

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/upload', true);

                xhr.upload.onprogress = function(event) {
                    // Handle progress events
                    console.log((event.loaded /event.total)*100)
                };

                xhr.onload = function() {
                    // Handle success or failure
                    console.log(event.returnValue)
                    document.getElementById("fileInput").value = "";
                };

                xhr.send(formData);
            });
        }
    </script>
</body>
</html>
